@namespace blazor_tutorial.Components.Ui.Card
@rendermode InteractiveServer
@inject BasketService BasketService

<Popup IsVisible="@isSubmitted" Title="Item Added!" Type="PopupType.Success" OnClose="() => isSubmitted = false">
    <Message>
        Thank you,
        Your item has been added to your basket.
    </Message>
</Popup>

<div class="mt-auto px-4 pb-4">
    <button
        class="py-2 px-3 w-full inline-flex justify-center items-center gap-x-2 text-sm font-medium rounded-xl border border-transparent bg-blue-400 text-white hover:bg-blue-500 transition"
        type="button" @onclick="AddToBasket">
        Buy now
    </button>
</div>

@code {
    private bool isSubmitted = false;
    [Parameter] public required string ProductId { get; set; }

    private void AddToBasket()
    {
        BasketService.AddItem(ProductId);
        isSubmitted = true;
    }
}
